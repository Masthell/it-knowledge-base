# "Построение отказоустойчивой IT-инфраструктуры с нуля | 7 уровней защиты" (SPOF)

> **Отказоустойчивая инфраструктура — не роскошь, а необходимость.** Система строится на принципе последовательного устранения **единых точек отказа (Single Point of Failure, SPOF)**. Рассмотрим 7 ключевых уровней защиты, применимых для малого и среднего бизнеса.

## Уровень 1: Интернет-подключение
**Цель:** Устранить зависимость от одного провайдера и канала связи.

*   **Два независимых интернет-провайдера** — подключение через географически разные каналы (оптика, радиоканал, LTE).
*   **Настройка балансировки и отказоустойчивости:**
    *   Маршрутизаторы с поддержкой балансировки нагрузки (pfSense, MikroTik, Cisco).
    *   Протоколы динамической маршрутизации (BGP) или настройка политик **Failover**.
    *   Технологии **Load Balancing** и **Link Aggregation**.

## Уровень 2: Электропитание
**Цель:** Обеспечить непрерывное энергоснабжение критического оборудования.

*   **Многоуровневая система:**
    *   **ИБП (UPS)** — защита от кратковременных сбоев, скачков и для корректного завершения работы.
    *   **Автоматические переключатели (ATS)** — для бесшовного перехода между источниками.
    *   **Дизельные/газовые генераторы** — обеспечение работы при длительных отключениях.

## Уровень 3: Сетевая инфраструктура
**Цель:** Исключить потерю связи из-за отказа одного коммутатора.

*   **Стекирование коммутаторов** (Cisco StackWise, HPE IRF) — несколько физических устройств работают как одно логическое, с общим управлением и резервированием.
*   **Избыточные связи и протоколы:**
    *   **STP/RSTP/MSTP** — предотвращение петель и автоматическое использование резервных путей.
    *   Дублирование магистральных линий между коммутаторами.

## Уровень 4: Серверное оборудование (железо)
**Цель:** Обеспечить отказоустойчивость на физическом уровне серверов.

*   **Двойное/множественное питание** — подключение к разным ИБП или фазам электросети.
*   **Агрегирование сетевых интерфейсов (LACP, Link Aggregation)** — объединение портов для увеличения пропускной способности и резервирования.
*   **Горячая замена** компонентов (блоки питания, вентиляторы, диски).

## Уровень 5: Хранение данных
**Цель:** Защитить данные и обеспечить доступность при отказе дисков.

*   **Выбор RAID-массива:**
    *   **RAID 1** — простое зеркало, надежность, простая реконструкция.
    *   **RAID 5/6** — баланс объема, скорости и надежности (с потерей емкости на четность).
    *   **RAID 10** — высочайшая производительность и надежность (зеркало из страйпов).
*   **Резервное копирование (Backup)** — обязательный элемент поверх RAID! Правило 3-2-1.

## Уровень 6: Программная отказоустойчивость и кластеризация
**Цель:** Обеспечить непрерывность работы сервисов при сбое целого сервера.

*   **Кластеризация:**
    *   **Active-Passive** (холодный/горячий резерв) — простой и надежный подход.
    *   **Active-Active** — максимальное использование ресурсов и балансировка нагрузки.
*   **Технологии:**
    *   **Виртуализация:** vSphere HA, Hyper-V Failover Clustering.
    *   **Контейнеризация:** Kubernetes (отказоустойчивость встроена).
    *   **СУБД:** репликация в PostgreSQL, MySQL, MongoDB.

## Уровень 7: Рабочие места пользователей
**Цель:** Обеспечить доступ к рабочим средам при проблемах с локальными ПК.

*   **Тонкие клиенты (Thin Clients)** — не имеют данных и сложной ОС, выполняют роль терминала.
*   **Серверы терминалов:**
    *   **RDS (Remote Desktop Services) фермы** — несколько серверов для балансировки сессий пользователей.
    *   **VDI (Virtual Desktop Infrastructure)** — каждому пользователю выделяется персональная виртуальная машина на сервере.
*   **Преимущества:** централизованное управление, безопасность, независимость от железа на столах.
